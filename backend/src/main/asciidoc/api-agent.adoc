= The case agent API
:snippets: ../../../target/generated-snippets

[[agent.cases]]
== Managing cases

[[agent.anomalies]]
== Working with anomalies

A case agent will find a `anomalies` link in the response.
It can be followed to get an overview of all cases ordered by a priority calculated from the anomalies recorded for those cases.

include::{snippets}/anomalies/access-anomalies/curl-request.adoc[]
include::{snippets}/anomalies/access-anomalies/response-body.adoc[]

== Response structure

include::{snippets}/anomalies/access-anomalies/auto-response-fields.adoc[]

== Accessing an anomaly

include::{snippets}/anomalies/access-anomaly/curl-request.adoc[]
include::{snippets}/anomalies/access-anomaly/response-body.adoc[]

=== Response structure

include::{snippets}/anomalies/access-anomaly/auto-response-fields.adoc[]

=== Available actions

include::{snippets}/anomalies/access-anomaly/links.adoc[]

[[agent.anomalies.resolve]]
== Resolving an anomaly

[[agent.registration.send]]
== Send registration mail

With the response of a registration (GET on `/hd/cases/{case-id}/registration`) you get a link `send-mail`.
You can follow this link with a `POST`-Request to send the registration e-mail to the recipient.
The e-mail can be sent if a case exists for the given ID, it has an e-mail address and a valid activation code that has not yet been sent.
If the e-mail with the currently valid activation link has already been sent, the link `send-mail` is not included in the response.
Furthermore, the marker `mailed` is present, which indicates whether the e-mail has already been sent.

include::{snippets}/registration/send-mail/curl-request.adoc[]

include::{snippets}/registration/send-mail/auto-path-parameters.adoc[]

The response is the registration in the current state.

include::{snippets}/registration/send-mail/response-body.adoc[]
