<div style="max-width: 1335px">
  <div style="display: flex; justify-content: space-between">
    <div style="display: flex">
      <button
        data-cy="new-case-button"
        mat-raised-button
        color="primary"
        [routerLink]="['/health-department/case-detail/new', 'contact']"
      >
        <mat-icon>add</mat-icon>Neue Kontaktperson anlegen
      </button>
    </div>
  </div>
  <ng-container *ngIf="cases$ | async as cases">
    <mat-form-field appearance="outline" class="full-width mt-3">
      <input
        matInput
        data-cy="search-case-input"
        type="text"
        placeholder="Suchen..."
        [(ngModel)]="filterString"
        name="filterString"
      />
    </mat-form-field>
    <ag-grid-angular
      style="width: 1335px; height: 500px"
      class="ag-theme-material"
      [rowData]="cases$ | async"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [pagination]="true"
      [paginationAutoPageSize]="false"
      [paginationPageSize]="10"
      [localeText]="locale"
      rowSelection="single"
      (rowSelected)="onSelect($event)"
      [quickFilterText]="filterString"
      (gridReady)="onGridReady($event)"
      [getRowHeight]="getRowHeight"
    >
    </ag-grid-angular>

    <!-- <ngx-datatable
      #table
      data-cy="case-data-table"
      class="material fixed-header"
      style="max-width: 1335px;"
      [count]="cases.length"
      [headerHeight]="50"
      rowHeight="auto"
      [rows]="filteredData"
      [messages]="{
        emptyMessage: 'Keine Daten zum Anzeigen vorhanden',
        selectedMessage: 'ausgew채hlt',
        totalMessage: cases.length === 1 ? 'Fall' : 'F채lle'
      }"
      [loadingIndicator]="loading"
      [footerHeight]="50"
      [selectionType]="selectionType"
      (select)="onSelect($event)"
      [limit]="15"
    >
      <ngx-datatable-column
        prop="status"
        name="Status"
        width="170"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
      >
      </ngx-datatable-column>

      <ngx-datatable-column
        prop="lastName"
        name="Nachname"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
        width="150"
      ></ngx-datatable-column>

      <ngx-datatable-column
        prop="firstName"
        name="Vorname"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
        width="150"
      >
      </ngx-datatable-column>

      <ngx-datatable-column
        prop="dateOfBirth"
        name="Geburtsdatum"
        width="140"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
        ><ng-template let-value="value" ngx-datatable-cell-template>
          <ng-container *ngIf="value; else empty_date_of_birth">{{ value | date: 'dd.MM.y' }}</ng-container>
          <ng-template #empty_date_of_birth>-</ng-template>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column
        prop="typeName"
        name="Typ"
        width="140"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
      >
      </ngx-datatable-column>

      <ngx-datatable-column
        prop="quarantineEnd"
        name="Quarant채ne bis"
        width="130"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
        ><ng-template let-value="value" ngx-datatable-cell-template>
          {{ getQuarantineEndString(value) }}
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column
        prop="createdAt"
        name="Angelegt am"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
        width="130"
        ><ng-template let-value="value" ngx-datatable-cell-template>
          <ng-container *ngIf="value; else empty_created">{{ value | date: 'dd.MM.y' }}</ng-container>
          <ng-template #empty_created>-</ng-template>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column
        prop="extReferenceNumber"
        name="Vorgangsnr."
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="true"
        width="150"
      >
      </ngx-datatable-column>
      <ngx-datatable-column
        prop="originCases"
        name="Ursprungsf채lle"
        [resizeable]="true"
        [sortable]="true"
        [canAutoResize]="true"
        cellClass="break-words"
      >
        <ng-template let-value="value" ngx-datatable-cell-template>
          <span class="break-words">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>
    </ngx-datatable> -->
  </ng-container>
</div>
