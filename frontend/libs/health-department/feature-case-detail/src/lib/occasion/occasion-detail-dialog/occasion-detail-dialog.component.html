<h2 mat-dialog-title>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.NEU' | translate }}</h2>

<mat-dialog-content>
  <form class="new-event-form" [formGroup]="occasionFormGroup">
    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.NAME' | translate }}</mat-label>
      <input
        required
        formControlName="title"
        matInput
        placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.NAME' | translate }}"
      />
      <mat-error *ngIf="occasionFormGroup?.controls?.title?.errors?.required">{{
        'EREIGNISSE.EREIGNIS_NEU_MODAL.ERROR.PFLICHTFELD' | translate
      }}</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ANSPRECHPARTNER' | translate }}</mat-label>
      <input
        formControlName="contactPerson"
        matInput
        placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ANSPRECHPARTNER' | translate }}"
      />
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.VON' | translate }}</mat-label>
      <input
        required
        formControlName="start"
        matInput
        placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.VON' | translate }}"
        [matDatepicker]="dateFrom"
      />
      <mat-datepicker-toggle matSuffix [for]="dateFrom"></mat-datepicker-toggle>
      <mat-datepicker #dateFrom></mat-datepicker>
      <mat-error *ngIf="occasionFormGroup?.controls?.start?.errors?.required">{{
        'EREIGNISSE.EREIGNIS_NEU_MODAL.ERROR.PFLICHTFELD' | translate
      }}</mat-error>
    </mat-form-field>

    <div>
      <mat-form-field>
        <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ZEIT_VON' | translate }}</mat-label>
        <div class="timepicker-input">
          <input
            matInput
            placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ZEIT_VON' | translate }}"
            formControlName="timeStart"
          />
          <button mat-icon-button (click)="fromTime.open()">
            <mat-icon>schedule</mat-icon>
          </button>
        </div>
        <mat-error *ngIf="occasionFormGroup?.controls?.timeStart?.errors?.pattern">{{
          'EREIGNISSE.EREIGNIS_NEU_MODAL.ERROR.ZEITFORMAT' | translate
        }}</mat-error>
      </mat-form-field>
      <ngx-material-timepicker
        [cancelBtnTmpl]="cancelBtn"
        [confirmBtnTmpl]="confirmBtn"
        [theme]="timepickerTheme"
        [disableAnimation]="true"
        #fromTime
        [format]="24"
        (timeSet)="setPickedStartTime($event)"
      ></ngx-material-timepicker>
    </div>

    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.BIS' | translate }}</mat-label>
      <input
        required
        formControlName="end"
        matInput
        placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.BIS' | translate }}"
        [matDatepicker]="dateTo"
      />
      <mat-datepicker-toggle matSuffix [for]="dateTo"></mat-datepicker-toggle>
      <mat-datepicker #dateTo></mat-datepicker>
      <mat-error *ngIf="occasionFormGroup?.controls?.start?.errors?.required">{{
        'EREIGNISSE.EREIGNIS_NEU_MODAL.ERROR.PFLICHTFELD' | translate
      }}</mat-error>
    </mat-form-field>

    <div>
      <mat-form-field>
        <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ZEIT_BIS' | translate }}</mat-label>
        <div class="timepicker-input">
          <input
            disabled
            matInput
            placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ZEIT_BIS' | translate }}"
            formControlName="timeEnd"
          />
          <button mat-icon-button (click)="toTime.open()">
            <mat-icon>schedule</mat-icon>
          </button>
        </div>
        <mat-error *ngIf="occasionFormGroup?.controls?.timeEnd?.errors?.pattern">{{
          'EREIGNISSE.EREIGNIS_NEU_MODAL.ERROR.ZEITFORMAT' | translate
        }}</mat-error>
      </mat-form-field>
      <ngx-material-timepicker
        [cancelBtnTmpl]="cancelBtn"
        [confirmBtnTmpl]="confirmBtn"
        [theme]="timepickerTheme"
        [disableAnimation]="true"
        [format]="24"
        #toTime
        (timeSet)="setPickedEndTime($event)"
      ></ngx-material-timepicker>
    </div>

    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.STRASSE' | translate }}</mat-label>
      <input
        formControlName="street"
        matInput
        placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.STRASSE' | translate }}"
      />
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.NUMMER' | translate }}</mat-label>
      <input
        formControlName="houseNumber"
        matInput
        placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.NUMMER' | translate }}"
      />
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ZIP' | translate }}</mat-label>
      <input formControlName="zipCode" matInput placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ZIP' | translate }}" />
      <mat-error *ngIf="occasionFormGroup?.controls?.zipCode?.errors?.pattern">{{
        'EREIGNISSE.EREIGNIS_NEU_MODAL.ERROR.ZIP' | translate
      }}</mat-error>
      <mat-error *ngIf="occasionFormGroup?.controls?.zipCode?.errors?.required">{{
        'EREIGNISSE.EREIGNIS_NEU_MODAL.ERROR.PFLICHTFELD' | translate
      }}</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.STADT' | translate }}</mat-label>
      <input formControlName="city" matInput placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.STADT' | translate }}" />
    </mat-form-field>

    <fieldset class="additional-info">
      <legend>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ZUSAETZTLICHE_BESCHREIBUNG' | translate }}</legend>

      <mat-form-field class="full-width">
        <textarea matInput formControlName="additionalInformation" type="text"></textarea>
      </mat-form-field>
    </fieldset>

    <mat-form-field *ngIf="initialOccasion?.occasionCode">
      <mat-label>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.CODE' | translate }}</mat-label>
      <input
        readonly
        formControlName="occasionCode"
        matInput
        placeholder="{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.CODE' | translate }}"
      />
    </mat-form-field>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="close()">{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ABBRECHEN' | translate }}</button>
  <button
    mat-button
    cdkFocusInitial
    (click)="closeAndSubmit()"
    [disabled]="occasionFormGroup?.invalid || occasionFormGroup?.untouched"
  >
    {{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ANLEGEN' | translate }}
  </button>
</mat-dialog-actions>

<ng-template #cancelBtn>
  <button mat-button>{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.ABBRECHEN' | translate }}</button>
</ng-template>
<ng-template #confirmBtn>
  <button mat-button color="primary">{{ 'EREIGNISSE.EREIGNIS_NEU_MODAL.OK' | translate }}</button>
</ng-template>
